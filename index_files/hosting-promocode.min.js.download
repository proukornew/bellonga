function updateCookiesPromoCode(o){$.post("/hosting/clearPromocodeCookies_ajax/",{code:o},()=>{},"json")}function checkValidPromoCode(o){return $.ajax({type:"GET",url:"/hosting/checkPromoCode_ajax",data:{promocode:o,plan:7110,period:12}})}function getCookiesPromoCode(){return $.ajax({type:"GET",url:"/hosting/getPromocodeCookies_ajax/",data:{}})}function applyPromoCode(o){$("#hosting-form__promocode").val(o).trigger("input"),initCheckPromoCode(o)}async function initPromoCode(){const o=await getCookiesPromoCode(),e=await JSON.parse(o).js.code,a=getQueryVariable("utm_term");if(a||!e){if(a)if(a===e)applyPromoCode(a);else{const o=await checkValidPromoCode(a),t=await JSON.parse(o).js.valid;t?(applyPromoCode(a),updateCookiesPromoCode(a)):a&&!t&&e&&applyPromoCode(e)}}else applyPromoCode(e)}function initCheckPromoCode(o){$(".service-plan").each((function(){const e=$(this),a=$(this).find("[name='reg_planType']").val();$.getJSON("/hosting/checkPromoCode_ajax",{promocode:o,plan:a,period:12},(function(o){try{if(o.js.valid&&o.js.data.rate_rub){const a=e.find(".select-panel").find(":selected"),t=0!==a.length?a.data("price"):0,i=+o.js.data.rate_rub+t,n=e.find(".div_select > span");$("<em/>",{class:"lightgreen"}).text(i).insertAfter(n),"/vds/free/"===location.pathname&&$(".ISP_prise_span").css("display","none"),n.addClass("through")}}catch(o){}}))}))}initPromoCode();